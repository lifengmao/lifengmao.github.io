---
title: javascript面试题
date:  2019-01-21 14:30:00
categories:
- js/面试
tags: 面试
---

面试题 待补充

---


### 请解释事件委托（event delegation）。

事件委托是将事件监听器添加到父元素，而不是每个子元素单独设置事件监听器。当触发子元素时，事件会冒泡到父元素，监听器就会触发。这种技术的好处是：
* 内存占用减少，因为只需要一个父元素的事件处理程序，而不必为每个后代都添加事件处理程序。
* 无需从已删除的元素中解绑处理程序，也无需将处理程序绑定到新元素上。


### 请简述javascript中的this

1. 在调用函数时如果使用new关键字，函数内的this指向全新的对象
2. 如果apply、call或bind方法用于调用、创建一个函数，函数内的this就是作为参数传入这些方法的对象。
3. 当函数作为对象里的方法被调用时，函数内的this指向调用该方法的对象。
4. 如果函数不符合以上规则，那么this指向全局对象，在严格模式下，指向undefined
5. 如果符合上述多个规则，则较高的规则来决定
6. ES6中的箭头函数，this直接被设置为它被创建时的上下文。


### 请解释原型继承的工作原理

所有的js对象都有一个prototype属性，指向它的原型对象。当试图访问一个对象的属性时，如果没有在该对象上找到，它还会搜寻该对象的原型，已经该对象的原型的原型，一次层层向上搜索。直到找到名字相匹配的属性或到达原型链的末尾。


### 请解释下面代码为什么不能用作 IIFE：function foo(){ }();，需要作出哪些修改才能使其成为 IIFE？

IIFE（Immediately Invoked Function Expressions）代表立即执行函数。 JavaScript 解析器将 function foo(){ }();解析成function foo(){ }和();。其中，前者是函数声明；后者（一对括号）是试图调用一个函数，却没有指定名称，因此它会抛出Uncaught SyntaxError: Unexpected token )的错误。

修改方法是：再添加一对括号，形式上有两种：(function foo(){ })()和(function foo(){ }())。以上函数不会暴露到全局作用域，如果不需要在函数内部引用自身，可以省略函数的名称。

你可能会用到 void 操作符：void function foo(){ }();。但是，这种做法是有问题的。表达式的值是undefined，所以如果你的 IIFE 有返回值，不要用这种做法。


### null、undefined和未声明变量之间有什么区别？如何检查判断这些状态值？

当你没有提前使用var、let或const声明变量，就为一个变量赋值时，该变量是未声明变量（undeclared variables）。未声明变量会脱离当前作用域，成为全局作用域下定义的变量。在严格模式下，给未声明的变量赋值，会抛出ReferenceError错误。和使用全局变量一样，使用未声明变量也是非常不好的做法，应当尽可能避免。要检查判断它们，需要将用到它们的代码放在try/catch语句中。
当一个变量已经声明，但没有赋值时，该变量的值是undefined。如果一个函数的执行结果被赋值给一个变量，但是这个函数却没有返回任何值，那么该变量的值是undefined。要检查它，需要使用严格相等；或者使用typeof，它会返回'undefined'字符串。请注意，不能使用非严格相等来检查，因为如果变量值为null，使用非严格相等也会返回true。
null只能被显式赋值给变量。它表示空值，与被显式赋值 undefined 的意义不同。要检查判断null值，需要使用严格相等运算符。请注意，和前面一样，不能使用非严格相等（==）来检查，因为如果变量值为undefined，使用非严格相等也会返回true。


### 什么是闭包（closure），为什么使用闭包

闭包是函数和声明该函数的词法环境的组合。词法作用域中使用的域，是变量在代码中声明的位置所决定的。闭包是即使被外部函数返回，依然可以访问到外部函数作用域的函数。

* 利用闭包实现数据的私有化或模拟私有方法。模块模式
* 部分参数函数柯里化


### 请说明.forEach循环和.map()循环的主要区别，它们分别在什么情况下使用？

forEach:
* 遍历数组中的元素
* 为每个元素执行回调。
* 无返回值

map：
* 遍历数组中的元素
* 通过对每个元素调用函数，将每个元素映射到一个新元素，从而创建一个新数组

如果你想得到一个结果，单不想改变原始数组，用map。如果你只需要在数组上做迭代修改，用forEach。


### 匿名函数的典型应用场景

* 匿名函数可以在IIFE中使用，来封装局部作用域内的代码，以便其声明的变量不会暴露到全局作用域。
* 匿名函数可以作为只用一次，不需要在其他地方使用的回调函数。
* 匿名函数可以用于函数式编程或Lodash。



### .call和.apply有什么区别

它们都用于调用函数，第一个参数将用于函数内this的值。
call接收逗号分隔的参数作为后面的参数；
apply接收一个参数数组。



### 请说明Function.prototype.bind的用法。

> bind()方法创建一个新的函数, 当被调用时，将其 this 关键字设置为提供的值，在调用新函数时，在任何提供之前提供一个给定的参数序列。



### 功能检测（feature detection）、功能推断（feature inference）和使用 UA 字符串之间有什么区别？

#### 功能检测

功能检测包括确定浏览器是否支持某段代码，以及是否运行不同的代码（取决于它是否执行），以便浏览器始终能够正常运行代码功能，而不会在某些浏览器中出现崩溃和错误。

```javascript]
if ('geolocation' in navigator) {
  // 可以使用 navigator.geolocation
} else {
  // 处理 navigator.geolocation 功能缺失
}
```
Modernizr是处理功能检测的优秀工具

#### 功能推断

功能推断与功能检测一样，会对功能可用性进行检查，但是在判断通过后，还会使用其他功能，因为它假设其他功能也可用，

```javascript
if (document.getElementsByTagName) {
  element = document.getElementById(id);
}
```
#### UA 字符串

这是一个浏览器报告的字符串，它允许网络协议对等方（network protocol peers）识别请求用户代理的应用类型、操作系统、应用供应商和应用版本。它可以通过navigator.userAgent访问。 然而，这个字符串很难解析并且很可能存在欺骗性。例如，Chrome 会同时作为 Chrome 和 Safari 进行报告。因此，要检测 Safari，除了检查 Safari 字符串，还要检查是否存在 Chrome 字符串。不要使用这种方式。

### Ajax

Ajax（asynchronous JavaScript and XML）是使用客户端上的许多 Web 技术，创建异步 Web 应用的一种 Web 开发技术。借助 Ajax，Web 应用可以异步（在后台）向服务器发送数据和从服务器检索数据，而不会干扰现有页面的显示和行为。通过将数据交换层与表示层分离，Ajax 允许网页和扩展 Web 应用程序动态更改内容，而无需重新加载整个页面。实际上，现在通常将 XML 替换为 JSON，因为 JavaScript 对 JSON 有原生支持优势。

XMLHttpRequest API 经常用于异步通信。此外还有最近流行的fetch API。

### 使用 Ajax 的优缺点分别是什么？

优点
* 交互性更好。来自服务器的新内容可以动态更改，无需重新加载整个页面。
* 减少与服务器的连接，因为脚本和样式只需要被请求一次。
* 状态可以维护在一个页面上。JavaScript 变量和 DOM 状态将得到保持，因为主容器页面未被重新加载。
* 基本上包括大部分 SPA 的优点。
缺点

* 动态网页很难收藏。
* 如果 JavaScript 已在浏览器中被禁用，则不起作用。
* 有些网络爬虫不执行 JavaScript，也不会看到 JavaScript 加载的内容。
* 基本上包括大部分 SPA 的缺点。


### JSONP

JSONP（带填充的 JSON）是一种通常用于绕过 Web 浏览器中的跨域限制的方法，因为 Ajax 不允许跨域请求。

JSONP 通过script标签发送跨域请求，通常使用callback查询参数，例如：https://example.com?callback=printData。 然后服务器将数据包装在一个名为printData的函数中并将其返回给客户端。

JSONP 可能具有一些安全隐患。由于 JSONP 是纯 JavaScript 实现，它可以完成 JavaScript 所能做的一切，因此需要信任 JSONP 数据的提供者。

现如今，跨来源资源共享（CORS） 是推荐的主流方式，JSONP 已被视为一种比较 hack 的方式。

### document 中的load事件和DOMContentLoaded事件之间的区别是什么？

当初始的 HTML 文档被完全加载和解析完成之后，DOMContentLoaded事件被触发，而无需等待样式表、图像和子框架的完成加载。

window的load事件仅在 DOM 和所有相关资源全部完成加载后才会触发。

### 什么是"use strict";？使用它有什么优缺

'use strict' 是用于对整个脚本或单个函数启用严格模式的语句。严格模式是可选择的一个限制 JavaScript 的变体一种方式 。

优点

* 无法再意外创建全局变量。
* 会使引起静默失败（silently fail，即：不报错也没有任何效果）的赋值操抛出异常。
* 试图删除不可删除的属性时会抛出异常（之前这种操作不会产生任何效果）。
* 要求函数的参数名唯一。
* 全局作用域下，this的值为undefined。
* 捕获了一些常见的编码错误，并抛出异常。
* 禁用令人困惑或欠佳的功能。

缺点

* 缺少许多开发人员已经习惯的功能
* 无法访问function.caller和function.argument
* 以不同严格模式编写的脚本合并后可能导致问题




